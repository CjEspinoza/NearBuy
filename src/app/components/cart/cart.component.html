<div class="border" *ngFor="let cart of cart.cartArray">
    <img src="{{ cart.image }}" class="image-test">
    <p>product: {{ cart.name }}</p>
    <p>id: {{ cart.id }}</p>
    <p>price: {{ cart.price }}</p>
    <p>
        <span>
            quantity: 
            <button (click)="cartAdd(cart.id)">+</button>
            {{ cart.quantity }}
            <button (click)="cartMin(cart.id)">-</button></span>
    </p>
    <p>
        <button (click)="removeItem(cart.id)">remove</button>
    </p>
</div>

<div>
    Total Amount: {{ cart.amount }}
</div>

<button (click)="cart.clearCart()">clear</button>
<button (click)="openModal(popup, null)">Proceed to Checkout</button>


<ng-template #popup let-d="dismiss">
    <div class="modal-header text-dark d-flex justify-content-center">
      {{checkoutDetails ? 'Update' : 'Add'}} Checkout Details
    </div>
  
    <div class="modal-body">
      <form [formGroup]="form">

        <div class="form-group">
          <label for="name">Name</label>
          <input id="name" type="text" formControlName="name"
                 class="form-control" [ngClass]="{'error-border': !form.get('name').valid && form.get('name').dirty}"/>
        </div>

        
        <div class="form-group">
            <label for="address">Address</label>
            <input id="address" type="text" formControlName="address"
                   class="form-control" [ngClass]="{'error-border': !form.get('address').valid && form.get('address').dirty}"/>
          </div>
  
        <div class="form-group">
          <label for="number">Contact Number</label>
          <input id="number" type="number" formControlName="number" value="+639"
                 class="form-control" [ngClass]="{'error-border': !form.get('number').valid && form.get('number').dirty}"/>
        </div>
        <div class="form-group">
            <label for="image">Valid ID</label>
            <input class="form-control" formControlName="image" id="image" type="file" (change)="upload($event)" accept="*.png.jpg.jpeg">
          </div>
          <div class="form-group d-none">
            <label for="amount">Amount</label>
            <input class="form-control" formControlName="amount" id="amount" type="number" [(ngModel)]="cart.amount">
          </div>

      </form>
  
      <div class="text-center">
        <button class="btn btn-primary btn-sm pl-4 pr-4 mr-2"
                [disabled]="!form.valid"
                (click)="checkoutDetails ? updateCheckout(checkoutDetails.id) : addCheckout(); d()">Save</button>
        <button class="btn btn-secondary btn-sm pl-4 pr-4 ml-2" (click)="d()">Cancel</button>
      </div>
    </div>
  </ng-template>

